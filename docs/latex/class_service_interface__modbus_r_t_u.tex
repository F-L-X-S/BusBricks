\doxysection{Service\+Interface\+\_\+modbus\+RTU Class Reference}
\hypertarget{class_service_interface__modbus_r_t_u}{}\label{class_service_interface__modbus_r_t_u}\index{ServiceInterface\_modbusRTU@{ServiceInterface\_modbusRTU}}


Service-\/\+Interface-\/class for Modbus-\/\+RTU\+: Impart incoming frames from the \doxylink{class_comm_interface}{Comm\+Interface} to the designated service of the service-\/cluster. Build outgoing modbus-\/\+RTU-\/frames from the payload provided by the services and impart them to the Communication-\/\+Interface. The service-\/\+IDs of the associated services are mapped to the modbus-\/rtu-\/function-\/code. If a \doxylink{class_frame}{Frame} is sent by a modbus-\/slave device, the frame\textquotesingle{}s slave-\/id is the same as the sender-\/id (and the local device-\/id). If a \doxylink{class_frame}{Frame} is sent by a modbus-\/device in mastermode, the frame\textquotesingle{}s slave-\/id is the receiver-\/id provided by the service, that provided the payload for the frame.  




{\ttfamily \#include $<$Service\+Interface\+\_\+modbus\+RTU.\+h$>$}

Inheritance diagram for Service\+Interface\+\_\+modbus\+RTU\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_service_interface__modbus_r_t_u}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_service_interface__modbus_r_t_u_aa8ce2b3a043c2ed435c84e1b4a2c1cba}{Service\+Interface\+\_\+modbus\+RTU}} (\mbox{\hyperlink{class_service_cluster_base}{Service\+Cluster\+Base}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{class_service_interface_ad1f915c1a536af5c73aa1315fd035535}{services}}, \mbox{\hyperlink{class_comm_interface__modbus_r_t_u}{Comm\+Interface\+\_\+modbus\+RTU}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{class_service_interface_a899b6f3e042682b285dca2588b833ae6}{comm\+\_\+interface}})
\begin{DoxyCompactList}\small\item\em Construct a new \doxylink{class_service_interface__modbus_r_t_u}{Service\+Interface\+\_\+modbus\+RTU} object. \end{DoxyCompactList}\item 
\Hypertarget{class_service_interface__modbus_r_t_u_a23666158d2a1b544174587843bb95808}\label{class_service_interface__modbus_r_t_u_a23666158d2a1b544174587843bb95808} 
{\bfseries \texorpdfstring{$\sim$}{\string~}\+Service\+Interface\+\_\+modbus\+RTU} ()
\begin{DoxyCompactList}\small\item\em Destroy the \doxylink{class_service_interface__modbus_r_t_u}{Service\+Interface\+\_\+modbus\+RTU} object. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_service_interface__modbus_r_t_u_ad1afd9540b980f8d4d8f2c947ce10a65}{communicate}} () override
\begin{DoxyCompactList}\small\item\em Manages data transfer between the \doxylink{class_comm_interface}{Comm\+Interface} and services. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{class_service_interface}{Service\+Interface$<$ Comm\+Interface\+\_\+modbus\+RTU, Frame\+\_\+modbus\+RTU $>$}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_service_interface_acc70c85786fa2e133f90683f60ebf67f}{Service\+Interface}} (\mbox{\hyperlink{class_comm_interface__modbus_r_t_u}{Comm\+Interface\+\_\+modbus\+RTU}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{class_service_interface_a899b6f3e042682b285dca2588b833ae6}{comm\+\_\+interface}}, \mbox{\hyperlink{class_service_cluster_base}{Service\+Cluster\+Base}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{class_service_interface_ad1f915c1a536af5c73aa1315fd035535}{services}})
\begin{DoxyCompactList}\small\item\em Construct a new \doxylink{class_service}{Service} Interface object. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{class_service_interface}{Service\+Interface$<$ Comm\+Interface\+\_\+modbus\+RTU, Frame\+\_\+modbus\+RTU $>$}}}
\begin{DoxyCompactItemize}
\item 
virtual void {\bfseries process\+Services} ()
\begin{DoxyCompactList}\small\item\em start the stack\+Processing of the registered services \end{DoxyCompactList}\item 
virtual void {\bfseries process\+Send\+Stack} ()
\begin{DoxyCompactList}\small\item\em Send all Frames, stored in the send\+Stack. As long as the send\+Stack is not empty, the function is getting pointers to the representation of the \doxylink{class_frame}{Frame} on the bottom of the stack. The pointer to the string-\/formatted representation is imparted to the \doxylink{class_comm_interface}{Comm\+Interface} as teh next frame to be sent by calling send\+New\+Frame. Then the \doxylink{class_comm_interface}{Comm\+Interface}\textquotesingle{}s send\+Cycle get\textquotesingle{}s executed. Exit, after the send\+Stack is empty. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_service_interface_a7c5ec5e13af8a67d1b08c963fcd71214}{process\+Rec\+Stack}} ()
\begin{DoxyCompactList}\small\item\em Add items received by the \doxylink{class_comm_interface}{Comm\+Interface} to the rec\+Stack and execute the \doxylink{class_comm_interface}{Comm\+Interface}\textquotesingle{}s receive\+Cycle to wait for new incoming frames. Exit, if the rec\+Stack is full or the \doxylink{class_comm_interface}{Comm\+Interface} did not received new Frames within the in receive\+Cycle specified timeout. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{class_service_interface}{Service\+Interface$<$ Comm\+Interface\+\_\+modbus\+RTU, Frame\+\_\+modbus\+RTU $>$}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_comm_interface__modbus_r_t_u}{Comm\+Interface\+\_\+modbus\+RTU}} \texorpdfstring{$\ast$}{*} {\bfseries comm\+\_\+interface}
\begin{DoxyCompactList}\small\item\em pointer to Communication-\/\+Interface (instance of Comm\+Interface-\/derived class) \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_service_cluster_base}{Service\+Cluster\+Base}} \texorpdfstring{$\ast$}{*} {\bfseries services}
\begin{DoxyCompactList}\small\item\em pointer to \doxylink{class_service_cluster}{Service\+Cluster}, containing the Services associated with the Interface (instance of Service\+Cluster-\/derived class) ~\newline
 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_content__stack}{Content\+\_\+stack}}$<$ \mbox{\hyperlink{class_frame__modbus_r_t_u}{Frame\+\_\+modbus\+RTU}}, STACKSIZE $>$ {\bfseries rec\+Stack}
\begin{DoxyCompactList}\small\item\em stack for received frames (instance of Content\+\_\+stack-\/derived class, specified for type of frames, the bus is using) ~\newline
 \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_content__stack}{Content\+\_\+stack}}$<$ \mbox{\hyperlink{class_frame__modbus_r_t_u}{Frame\+\_\+modbus\+RTU}}, STACKSIZE $>$ {\bfseries send\+Stack}
\begin{DoxyCompactList}\small\item\em stack for frames to send next (instance of Content\+\_\+stack-\/derived class, specified for type of frames, the bus is using) ~\newline
 \end{DoxyCompactList}\item 
String {\bfseries send\+Item}
\begin{DoxyCompactList}\small\item\em Item to be sent next ~\newline
 \end{DoxyCompactList}\item 
String {\bfseries rec\+Item}
\begin{DoxyCompactList}\small\item\em Item received last ~\newline
 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Service-\/\+Interface-\/class for Modbus-\/\+RTU\+: Impart incoming frames from the \doxylink{class_comm_interface}{Comm\+Interface} to the designated service of the service-\/cluster. Build outgoing modbus-\/\+RTU-\/frames from the payload provided by the services and impart them to the Communication-\/\+Interface. The service-\/\+IDs of the associated services are mapped to the modbus-\/rtu-\/function-\/code. If a \doxylink{class_frame}{Frame} is sent by a modbus-\/slave device, the frame\textquotesingle{}s slave-\/id is the same as the sender-\/id (and the local device-\/id). If a \doxylink{class_frame}{Frame} is sent by a modbus-\/device in mastermode, the frame\textquotesingle{}s slave-\/id is the receiver-\/id provided by the service, that provided the payload for the frame. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{class_service_interface__modbus_r_t_u_aa8ce2b3a043c2ed435c84e1b4a2c1cba}\index{ServiceInterface\_modbusRTU@{ServiceInterface\_modbusRTU}!ServiceInterface\_modbusRTU@{ServiceInterface\_modbusRTU}}
\index{ServiceInterface\_modbusRTU@{ServiceInterface\_modbusRTU}!ServiceInterface\_modbusRTU@{ServiceInterface\_modbusRTU}}
\doxysubsubsection{\texorpdfstring{ServiceInterface\_modbusRTU()}{ServiceInterface\_modbusRTU()}}
{\footnotesize\ttfamily \label{class_service_interface__modbus_r_t_u_aa8ce2b3a043c2ed435c84e1b4a2c1cba} 
Service\+Interface\+\_\+modbus\+RTU\+::\+Service\+Interface\+\_\+modbus\+RTU (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_service_cluster_base}{Service\+Cluster\+Base}} \texorpdfstring{$\ast$}{*}}]{services}{, }\item[{\mbox{\hyperlink{class_comm_interface__modbus_r_t_u}{Comm\+Interface\+\_\+modbus\+RTU}} \texorpdfstring{$\ast$}{*}}]{comm\+\_\+interface}{}\end{DoxyParamCaption})}



Construct a new \doxylink{class_service_interface__modbus_r_t_u}{Service\+Interface\+\_\+modbus\+RTU} object. 


\begin{DoxyParams}{Parameters}
{\em services} & pointer to Service-\/cluster containing all services associated with the \doxylink{class_service_interface}{Service\+Interface} \\
\hline
{\em comm\+\_\+interface} & pointer to the Comm\+Interface\+\_\+modbus\+RTU-\/instance to use for communication \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\Hypertarget{class_service_interface__modbus_r_t_u_ad1afd9540b980f8d4d8f2c947ce10a65}\index{ServiceInterface\_modbusRTU@{ServiceInterface\_modbusRTU}!communicate@{communicate}}
\index{communicate@{communicate}!ServiceInterface\_modbusRTU@{ServiceInterface\_modbusRTU}}
\doxysubsubsection{\texorpdfstring{communicate()}{communicate()}}
{\footnotesize\ttfamily \label{class_service_interface__modbus_r_t_u_ad1afd9540b980f8d4d8f2c947ce10a65} 
void Service\+Interface\+\_\+modbus\+RTU\+::communicate (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Manages data transfer between the \doxylink{class_comm_interface}{Comm\+Interface} and services. 

This function coordinates the entire communication process by\+:
\begin{DoxyItemize}
\item Retrieving incoming frames from the communication interface.
\item Processing and adding received PDUs to the appropriate services.
\item Updating communication stacks as needed.
\item Executing the communication cycle for the interface.
\end{DoxyItemize}


\begin{DoxyItemize}
\item Calls {\ttfamily process\+Rec\+Stack} to handle incoming frames and manage the receive stack.
\item Uses {\ttfamily add\+PDU\+\_\+to\+\_\+services} to distribute PDUs to services based on the Modbus RTU function code.
\item Executes {\ttfamily process\+Services} to perform any necessary actions or updates within the services.
\item Retrieves PDUs from services and prepares them for sending using {\ttfamily get\+PDU\+\_\+from\+\_\+services}.
\item Finally, calls {\ttfamily process\+Send\+Stack} to manage and send the new frames to the communication interface.
\end{DoxyItemize}

\begin{DoxyNote}{Note}

\begin{DoxyItemize}
\item The function orchestrates the communication between the \doxylink{class_comm_interface}{Comm\+Interface} and services, ensuring data is properly transferred in both directions. 
\end{DoxyItemize}
\end{DoxyNote}


Implements \mbox{\hyperlink{class_service_interface_aeaebdad7101c0a66bee56edc4e6a19c1}{Service\+Interface$<$ Comm\+Interface\+\_\+modbus\+RTU, Frame\+\_\+modbus\+RTU $>$}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/felixschulke/\+Developement/\+Arduino/\+Modbus\+\_\+\+RTU/\+Modbus\+\_\+\+RTU/\+Modbus-\/\+RTU/lib/\+Modbus\+RTU/\mbox{\hyperlink{_service_interface__modbus_r_t_u_8h}{Service\+Interface\+\_\+modbus\+RTU.\+h}}\item 
/\+Users/felixschulke/\+Developement/\+Arduino/\+Modbus\+\_\+\+RTU/\+Modbus\+\_\+\+RTU/\+Modbus-\/\+RTU/lib/\+Modbus\+RTU/Service\+Interface\+\_\+modbus\+RTU.\+cpp\end{DoxyCompactItemize}
